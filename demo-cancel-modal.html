<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - Modal de Cancelamento</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .demo-container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
        }
        
        .demo-title {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 8px 0;
        }
        
        .demo-subtitle {
            color: #6b7280;
            margin: 0 0 32px 0;
            line-height: 1.5;
        }
        
        .demo-button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            box-shadow: 0 4px 16px rgba(245, 158, 11, 0.3);
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        }
        
        .demo-button i {
            font-size: 18px;
        }
        
        .features {
            text-align: left;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }
        
        .features h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin: 0 0 16px 0;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .feature-list li {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: #6b7280;
            font-size: 14px;
        }
        
        .feature-list i {
            color: #10b981;
            width: 16px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">Modal de Cancelamento</h1>
        <p class="demo-subtitle">
            Interface moderna e intuitiva para solicitar o motivo do cancelamento de ocorrências
        </p>
        
        <button class="demo-button" onclick="showCancelReasonModal(handleCancelResult)">
            <i class="fas fa-ban"></i>
            Testar Modal de Cancelamento
        </button>
        
        <div class="features">
            <h3>✨ Características</h3>
            <ul class="feature-list">
                <li><i class="fas fa-check"></i> Design moderno e responsivo</li>
                <li><i class="fas fa-check"></i> Motivos pré-definidos</li>
                <li><i class="fas fa-check"></i> Campo para detalhes adicionais</li>
                <li><i class="fas fa-check"></i> Validação em tempo real</li>
                <li><i class="fas fa-check"></i> Contador de caracteres</li>
                <li><i class="fas fa-check"></i> Animações suaves</li>
                <li><i class="fas fa-check"></i> Suporte mobile</li>
                <li><i class="fas fa-check"></i> Acessibilidade (ESC, foco)</li>
            </ul>
        </div>
    </div>

    <script>
        /**
         * Modal estilizado para solicitar motivo do cancelamento
         */
        function showCancelReasonModal(callback) {
            // Criar overlay do modal
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'cancel-reason-modal-overlay';
            
            // Criar modal
            const modal = document.createElement('div');
            modal.className = 'cancel-reason-modal';
            
            modal.innerHTML = `
                <div class="cancel-reason-header">
                    <div class="cancel-reason-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h2 class="cancel-reason-title">Cancelar Solicitação</h2>
                    <p class="cancel-reason-subtitle">Por favor, informe o motivo do cancelamento desta ocorrência</p>
                </div>
                
                <div class="cancel-reason-body">
                    <div class="form-group">
                        <label for="cancel-reason-select" class="form-label">
                            <i class="fas fa-list"></i>
                            Selecione um motivo
                        </label>
                        <select id="cancel-reason-select" class="form-select">
                            <option value="">Selecione um motivo...</option>
                            <option value="Documentação incompleta">Documentação incompleta</option>
                            <option value="Solicitação duplicada">Solicitação duplicada</option>
                            <option value="Dados incorretos">Dados incorretos</option>
                            <option value="Falta de competência">Falta de competência</option>
                            <option value="Solicitação indevida">Solicitação indevida</option>
                            <option value="Desistência do solicitante">Desistência do solicitante</option>
                            <option value="Outros">Outros (especificar abaixo)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="cancel-reason-details" class="form-label">
                            <i class="fas fa-edit"></i>
                            Detalhes adicionais
                        </label>
                        <textarea 
                            id="cancel-reason-details" 
                            class="form-textarea" 
                            placeholder="Descreva detalhadamente o motivo do cancelamento..."
                            rows="4"
                            maxlength="500"
                        ></textarea>
                        <div class="character-count">
                            <span id="char-count">0</span>/500 caracteres
                        </div>
                    </div>
                    
                    <div class="warning-message">
                        <i class="fas fa-info-circle"></i>
                        <p>Esta ação não pode ser desfeita. O solicitante será notificado sobre o cancelamento por e-mail.</p>
                    </div>
                </div>
                
                <div class="cancel-reason-footer">
                    <button type="button" class="btn-cancel-action" id="cancel-action-btn">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <button type="button" class="btn-confirm-cancel" id="confirm-cancel-btn">
                        <i class="fas fa-ban"></i>
                        Confirmar Cancelamento
                    </button>
                </div>
            `;
            
            modalOverlay.appendChild(modal);
            document.body.appendChild(modalOverlay);
            
            // Adicionar estilos CSS
            const style = document.createElement('style');
            style.textContent = `
                .cancel-reason-modal-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.6);
                    backdrop-filter: blur(5px);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                    animation: fadeInOverlay 0.3s ease-out;
                }
                
                .cancel-reason-modal {
                    background: white;
                    border-radius: 16px;
                    box-shadow: 
                        0 20px 60px rgba(0, 0, 0, 0.2),
                        0 0 0 1px rgba(255, 255, 255, 0.1);
                    width: 90%;
                    max-width: 540px;
                    max-height: 90vh;
                    overflow-y: auto;
                    animation: slideUpModal 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                }
                
                .cancel-reason-header {
                    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
                    color: white;
                    padding: 24px;
                    border-radius: 16px 16px 0 0;
                    text-align: center;
                    position: relative;
                }
                
                .cancel-reason-icon {
                    background: rgba(255, 255, 255, 0.2);
                    width: 64px;
                    height: 64px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto 16px;
                    backdrop-filter: blur(10px);
                }
                
                .cancel-reason-icon i {
                    font-size: 28px;
                    color: white;
                }
                
                .cancel-reason-title {
                    font-size: 24px;
                    font-weight: 700;
                    margin: 0 0 8px 0;
                    color: white;
                }
                
                .cancel-reason-subtitle {
                    font-size: 16px;
                    margin: 0;
                    opacity: 0.9;
                    line-height: 1.5;
                }
                
                .cancel-reason-body {
                    padding: 24px;
                }
                
                .form-group {
                    margin-bottom: 20px;
                }
                
                .form-label {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-weight: 600;
                    color: #374151;
                    margin-bottom: 8px;
                    font-size: 14px;
                }
                
                .form-label i {
                    color: #6b7280;
                }
                
                .form-select {
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    background: white;
                    transition: all 0.2s ease;
                    appearance: none;
                    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
                    background-position: right 12px center;
                    background-repeat: no-repeat;
                    background-size: 16px;
                    padding-right: 40px;
                }
                
                .form-select:focus {
                    outline: none;
                    border-color: #f59e0b;
                    box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
                }
                
                .form-textarea {
                    width: 100%;
                    padding: 12px 16px;
                    border: 2px solid #e5e7eb;
                    border-radius: 8px;
                    font-size: 14px;
                    font-family: inherit;
                    resize: vertical;
                    min-height: 100px;
                    transition: all 0.2s ease;
                }
                
                .form-textarea:focus {
                    outline: none;
                    border-color: #f59e0b;
                    box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
                }
                
                .character-count {
                    text-align: right;
                    font-size: 12px;
                    color: #6b7280;
                    margin-top: 4px;
                }
                
                .warning-message {
                    background: #fef3f2;
                    border: 1px solid #fecaca;
                    border-radius: 8px;
                    padding: 16px;
                    display: flex;
                    align-items: flex-start;
                    gap: 12px;
                    margin-top: 20px;
                }
                
                .warning-message i {
                    color: #ef4444;
                    margin-top: 2px;
                    flex-shrink: 0;
                }
                
                .warning-message p {
                    margin: 0;
                    color: #7f1d1d;
                    font-size: 14px;
                    line-height: 1.5;
                }
                
                .cancel-reason-footer {
                    padding: 20px 24px;
                    border-top: 1px solid #f3f4f6;
                    display: flex;
                    gap: 12px;
                    justify-content: flex-end;
                }
                
                .btn-cancel-action {
                    background: #f3f4f6;
                    color: #374151;
                    border: none;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 14px;
                }
                
                .btn-cancel-action:hover {
                    background: #e5e7eb;
                    transform: translateY(-1px);
                }
                
                .btn-confirm-cancel {
                    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                    color: white;
                    border: none;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 14px;
                    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
                }
                
                .btn-confirm-cancel:hover {
                    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
                    transform: translateY(-1px);
                    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.4);
                }
                
                .btn-confirm-cancel:disabled {
                    background: #d1d5db;
                    cursor: not-allowed;
                    transform: none;
                    box-shadow: none;
                }
                
                @keyframes fadeInOverlay {
                    from {
                        opacity: 0;
                    }
                    to {
                        opacity: 1;
                    }
                }
                
                @keyframes slideUpModal {
                    from {
                        opacity: 0;
                        transform: translateY(50px) scale(0.95);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
                
                @media (max-width: 640px) {
                    .cancel-reason-modal {
                        margin: 20px;
                        width: calc(100% - 40px);
                    }
                    
                    .cancel-reason-footer {
                        flex-direction: column;
                    }
                    
                    .btn-cancel-action,
                    .btn-confirm-cancel {
                        width: 100%;
                        justify-content: center;
                    }
                }
            `;
            
            document.head.appendChild(style);
            
            // Elementos do modal
            const selectElement = modal.querySelector('#cancel-reason-select');
            const textareaElement = modal.querySelector('#cancel-reason-details');
            const charCountElement = modal.querySelector('#char-count');
            const cancelBtn = modal.querySelector('#cancel-action-btn');
            const confirmBtn = modal.querySelector('#confirm-cancel-btn');
            
            // Contador de caracteres
            textareaElement.addEventListener('input', function() {
                const count = this.value.length;
                charCountElement.textContent = count;
                
                if (count > 450) {
                    charCountElement.style.color = '#ef4444';
                } else {
                    charCountElement.style.color = '#6b7280';
                }
            });
            
            // Validação e habilitação do botão
            function validateForm() {
                const hasReason = selectElement.value.trim() !== '';
                const hasDetails = textareaElement.value.trim() !== '';
                
                if (selectElement.value === 'Outros') {
                    confirmBtn.disabled = !hasDetails;
                } else {
                    confirmBtn.disabled = !hasReason;
                }
            }
            
            selectElement.addEventListener('change', validateForm);
            textareaElement.addEventListener('input', validateForm);
            
            // Event listeners
            cancelBtn.addEventListener('click', () => {
                closeModal();
                callback(null);
            });
            
            confirmBtn.addEventListener('click', () => {
                const reason = selectElement.value;
                const details = textareaElement.value.trim();
                
                let finalReason = reason;
                if (reason === 'Outros' && details) {
                    finalReason = details;
                } else if (reason && details) {
                    finalReason = `${reason} - ${details}`;
                }
                
                if (finalReason) {
                    closeModal();
                    callback(finalReason);
                }
            });
            
            // Fechar modal ao clicar no overlay
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                    callback(null);
                }
            });
            
            // Fechar modal com ESC
            document.addEventListener('keydown', function escHandler(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    callback(null);
                    document.removeEventListener('keydown', escHandler);
                }
            });
            
            function closeModal() {
                modalOverlay.style.animation = 'fadeInOverlay 0.2s ease-out reverse';
                modal.style.animation = 'slideUpModal 0.2s ease-out reverse';
                
                setTimeout(() => {
                    if (document.body.contains(modalOverlay)) {
                        document.body.removeChild(modalOverlay);
                    }
                }, 200);
            }
            
            // Focar no select
            setTimeout(() => {
                selectElement.focus();
            }, 100);
            
            // Validação inicial
            validateForm();
        }

        function handleCancelResult(reason) {
            if (reason) {
                alert(`Motivo do cancelamento:\n\n"${reason}"\n\nEste seria o motivo registrado no sistema.`);
            } else {
                alert('Cancelamento abortado.');
            }
        }
    </script>
</body>
</html>